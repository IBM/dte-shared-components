{"version":3,"file":"appbase-js.umd.js","sources":["../node_modules/url-parser-lite/index.js","../src/utils/index.js","../src/core/index.js","../node_modules/querystring/decode.js","../node_modules/querystring/encode.js","../node_modules/querystring/index.js","../node_modules/cross-fetch/dist/browser-ponyfill.js","../src/core/request/fetch.js","../src/core/request/ws.js","../src/core/api/index.js","../src/core/api/get.js","../src/core/api/update.js","../src/core/api/delete.js","../src/core/api/bulk.js","../src/core/api/search.js","../src/core/api/msearch.js","../src/core/api/reactiveSearchv3Api.js","../src/core/api/getStream.js","../src/core/api/searchStream.js","../node_modules/jsonify/lib/parse.js","../node_modules/jsonify/lib/stringify.js","../node_modules/jsonify/index.js","../node_modules/json-stable-stringify/index.js","../src/core/api/searchStreamToURL.js","../src/core/api/getTypes.js","../src/core/api/getMappings.js","../src/core/api/getSuggestionsv3Api.js","../src/index.js"],"sourcesContent":["function URL(url) {\n    var pattern = RegExp(\"^(([^:/?#]*)?://)?(((.*)?@)?([^/?#]*)?)([^?#]*)(\\\\?([^#]*))?(#(.*))?\");\n    var matches = url.match(pattern);\n\n    return {\n        protocol: matches[2],\n        auth: matches[5],\n        host: matches[6],\n        path: matches[7],\n        query: matches[9],\n        hash: matches[11]\n    };\n}\n\nmodule.exports = URL;\n","export function contains(string, substring) {\n  return string.indexOf(substring) !== -1;\n}\nexport function isAppbase(url) {\n  return contains(url, 'scalr.api.appbase.io');\n}\nexport function btoa(input = '') {\n  const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n  const str = input;\n  let output = '';\n\n  // eslint-disable-next-line\n  for (\n    let block = 0, charCode, i = 0, map = chars;\n    str.charAt(i | 0) || ((map = '='), i % 1); // eslint-disable-line no-bitwise\n    output += map.charAt(63 & (block >> (8 - (i % 1) * 8))) // eslint-disable-line no-bitwise\n  ) {\n    charCode = str.charCodeAt((i += 3 / 4));\n\n    if (charCode > 0xff) {\n      throw new Error(\n        '\"btoa\" failed: The string to be encoded contains characters outside of the Latin1 range.',\n      );\n    }\n\n    block = (block << 8) | charCode; // eslint-disable-line no-bitwise\n  }\n\n  return output;\n}\nexport function uuidv4() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n    const r = (Math.random() * 16) | 0; // eslint-disable-line no-bitwise\n\n    const v = c === 'x' ? r : (r & 0x3) | 0x8; // eslint-disable-line no-bitwise\n    return v.toString(16);\n  });\n}\n\nexport function validateRSQuery(query, isSuggestionsAPI = false) {\n  if (query && Object.prototype.toString.call(query) === '[object Array]') {\n    for (let i = 0; i < query.length; i += 1) {\n      const q = query[i];\n      if (q) {\n        if (!q.id) {\n          return new Error('\\'id\\' field must be present in query object');\n        }\n        // `dataField` is only optional for search types\n        if ((q.type && q.type !== 'search') || isSuggestionsAPI) {\n          if (!q.dataField) return new Error('\\'dataField\\' field must be present in query object');\n        }\n        if (q.dataField && Object.prototype.toString.call(q.dataField) !== '[object Array]') {\n          return new Error('\\'dataField\\' field must be an array');\n        }\n      } else {\n        return new Error('query object can not have an empty value');\n      }\n    }\n    return true;\n  }\n  return new Error('invalid query value, \\'query\\' value must be an array');\n}\n\n\nexport function validate(object, fields) {\n  const invalid = [];\n  const emptyFor = {\n    object: null,\n    string: '',\n  };\n  const keys = Object.keys(fields);\n  keys.forEach((key) => {\n    const type = fields[key];\n    // eslint-disable-next-line\n    if (typeof object[key] !== type || object[key] === emptyFor[type]) {\n      invalid.push(key);\n    }\n  });\n  let missing = '';\n  for (let i = 0; i < invalid.length; i += 1) {\n    missing += `${invalid[i]}, `;\n  }\n  if (invalid.length > 0) {\n    return new Error(`fields missing: ${missing}`);\n  }\n\n  return true;\n}\n\nexport function removeUndefined(value = {}) {\n  if (value || !(Object.keys(value).length === 0 && value.constructor === Object)) {\n    return JSON.parse(JSON.stringify(value));\n  }\n  return null;\n}\n\n/**\n * Send only when a connection is opened\n * @param {Object} socket\n * @param {Function} callback\n */\nexport function waitForSocketConnection(socket, callback) {\n  setTimeout(() => {\n    if (socket.readyState === 1) {\n      if (callback != null) {\n        callback();\n      }\n    } else {\n      waitForSocketConnection(socket, callback);\n    }\n  }, 5); // wait 5 ms for the connection...\n}\n\nexport function encodeHeaders(headers = {}, shouldEncode = true) {\n  // Encode headers\n  let encodedHeaders = {};\n  if (shouldEncode) {\n    Object.keys(headers).forEach((header) => {\n      encodedHeaders[header] = encodeURI(headers[header]);\n    });\n  } else {\n    encodedHeaders = headers;\n  }\n  return encodedHeaders;\n}\n","import URL from 'url-parser-lite';\nimport { isAppbase } from '../utils/index';\n/**\n * Returns an instance of Appbase client\n * @param {Object} config To configure properties\n * @param {String} config.url\n * @param {String} config.app\n * @param {String} config.credentials\n * @param {String} config.username\n * @param {String} config.password\n * A callback function which will be invoked before a fetch request made\n */\nfunction AppBase(config) {\n  const {\n auth = null, host = '', path = '', protocol = '',\n} = URL(config.url || '');\n  let url = host + path;\n\n  // Validate config and throw appropriate error\n  if (typeof url !== 'string' || url === '') {\n    throw new Error('URL not present in options.');\n  }\n  if (typeof config.app !== 'string' || config.app === '') {\n    throw new Error('App name is not present in options.');\n  }\n  if (typeof protocol !== 'string' || protocol === '') {\n    throw new Error(\n      'Protocol is not present in url. URL should be of the form https://scalr.api.appbase.io',\n    );\n  }\n  // Parse url\n  if (url.slice(-1) === '/') {\n    url = url.slice(0, -1);\n  }\n  let credentials = auth || null;\n  /**\n   * Credentials can be provided as a part of the URL,\n   * as username, password args or as a credentials argument directly */\n  if (typeof config.credentials === 'string' && config.credentials !== '') {\n    // eslint-disable-next-line\n    credentials = config.credentials;\n  } else if (\n    typeof config.username === 'string'\n    && config.username !== ''\n    && typeof config.password === 'string'\n    && config.password !== ''\n  ) {\n    credentials = `${config.username}:${config.password}`;\n  }\n\n  if (isAppbase(url) && credentials === null) {\n    throw new Error('Authentication information is not present. Did you add credentials?');\n  }\n  this.url = url;\n  this.protocol = protocol;\n  this.app = config.app;\n  this.credentials = credentials;\n  this.headers = {};\n}\nexport default AppBase;\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (Array.isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return Object.keys(obj).map(function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (Array.isArray(obj[k])) {\n        return obj[k].map(function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n","var __root__ = (function (root) {\nfunction F() { this.fetch = false; }\nF.prototype = root;\nreturn new F();\n})(typeof self !== 'undefined' ? self : this);\n(function(self) {\n\n(function(self) {\n\n  if (self.fetch) {\n    return\n  }\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob();\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  };\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ];\n\n    var isDataView = function(obj) {\n      return obj && DataView.prototype.isPrototypeOf(obj)\n    };\n\n    var isArrayBufferView = ArrayBuffer.isView || function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    };\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name);\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value);\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift();\n        return {done: value === undefined, value: value}\n      }\n    };\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      };\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    var oldValue = this.map[name];\n    this.map[name] = oldValue ? oldValue+','+value : value;\n  };\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)];\n  };\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name);\n    return this.has(name) ? this.map[name] : null\n  };\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  };\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value);\n  };\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this);\n      }\n    }\n  };\n\n  Headers.prototype.keys = function() {\n    var items = [];\n    this.forEach(function(value, name) { items.push(name); });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.values = function() {\n    var items = [];\n    this.forEach(function(value) { items.push(value); });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.entries = function() {\n    var items = [];\n    this.forEach(function(value, name) { items.push([name, value]); });\n    return iteratorFor(items)\n  };\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true;\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result);\n      };\n      reader.onerror = function() {\n        reject(reader.error);\n      };\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf);\n    var chars = new Array(view.length);\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i]);\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength);\n      view.set(new Uint8Array(buf));\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false;\n\n    this._initBody = function(body) {\n      this._bodyInit = body;\n      if (!body) {\n        this._bodyText = '';\n      } else if (typeof body === 'string') {\n        this._bodyText = body;\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body;\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body;\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString();\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer);\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer]);\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body);\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8');\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type);\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n      }\n    };\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this);\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      };\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      };\n    }\n\n    this.text = function() {\n      var rejected = consumed(this);\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    };\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      };\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    };\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase();\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {};\n    var body = options.body;\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url;\n      this.credentials = input.credentials;\n      if (!options.headers) {\n        this.headers = new Headers(input.headers);\n      }\n      this.method = input.method;\n      this.mode = input.mode;\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit;\n        input.bodyUsed = true;\n      }\n    } else {\n      this.url = String(input);\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit';\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers);\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET');\n    this.mode = options.mode || this.mode || null;\n    this.referrer = null;\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body);\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, { body: this._bodyInit })\n  };\n\n  function decode(body) {\n    var form = new FormData();\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=');\n        var name = split.shift().replace(/\\+/g, ' ');\n        var value = split.join('=').replace(/\\+/g, ' ');\n        form.append(decodeURIComponent(name), decodeURIComponent(value));\n      }\n    });\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers();\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':');\n      var key = parts.shift().trim();\n      if (key) {\n        var value = parts.join(':').trim();\n        headers.append(key, value);\n      }\n    });\n    return headers\n  }\n\n  Body.call(Request.prototype);\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {};\n    }\n\n    this.type = 'default';\n    this.status = options.status === undefined ? 200 : options.status;\n    this.ok = this.status >= 200 && this.status < 300;\n    this.statusText = 'statusText' in options ? options.statusText : 'OK';\n    this.headers = new Headers(options.headers);\n    this.url = options.url || '';\n    this._initBody(bodyInit);\n  }\n\n  Body.call(Response.prototype);\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  };\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''});\n    response.type = 'error';\n    return response\n  };\n\n  var redirectStatuses = [301, 302, 303, 307, 308];\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  };\n\n  self.Headers = Headers;\n  self.Request = Request;\n  self.Response = Response;\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init);\n      var xhr = new XMLHttpRequest();\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        };\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options));\n      };\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.open(request.method, request.url, true);\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true;\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false;\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob';\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value);\n      });\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n    })\n  };\n  self.fetch.polyfill = true;\n})(typeof self !== 'undefined' ? self : this);\n}).call(__root__, void(0));\nvar fetch = __root__.fetch;\nvar Response = fetch.Response = __root__.Response;\nvar Request = fetch.Request = __root__.Request;\nvar Headers = fetch.Headers = __root__.Headers;\nif (typeof module === 'object' && module.exports) {\nmodule.exports = fetch;\n// Needed for TypeScript consumers without esModuleInterop.\nmodule.exports.default = fetch;\n}\n","import querystring from 'querystring';\nimport fetch from 'cross-fetch';\nimport { btoa, removeUndefined } from '../../utils/index';\n\n/**\n * To perform fetch request\n * @param {Object} args\n * @param {String} args.method\n * @param {String} args.path\n * @param {Object} args.params\n * @param {Object} args.body\n * @param {boolean} args.isSuggestionsAPI\n */\nfunction fetchRequest(args) {\n  return new Promise((resolve, reject) => {\n    const parsedArgs = removeUndefined(args);\n    try {\n      const {\n        method,\n        path,\n        params,\n        body,\n        isRSAPI,\n        isSuggestionsAPI,\n      } = parsedArgs;\n      const app = isSuggestionsAPI ? '.suggestions' : this.app;\n      let bodyCopy = body;\n      const contentType = path.endsWith('msearch') || path.endsWith('bulk')\n          ? 'application/x-ndjson'\n          : 'application/json';\n      const headers = Object.assign(\n        {},\n        {\n          Accept: 'application/json',\n          'Content-Type': contentType,\n        },\n        this.headers,\n      );\n      const timestamp = Date.now();\n      if (this.credentials) {\n        headers.Authorization = `Basic ${btoa(this.credentials)}`;\n      }\n      const requestOptions = {\n        method,\n        headers,\n      };\n      if (Array.isArray(bodyCopy)) {\n        let arrayBody = '';\n        bodyCopy.forEach((item) => {\n          arrayBody += JSON.stringify(item);\n          arrayBody += '\\n';\n        });\n\n        bodyCopy = arrayBody;\n      } else {\n        bodyCopy = JSON.stringify(bodyCopy) || {};\n      }\n\n      if (Object.keys(bodyCopy).length !== 0) {\n        requestOptions.body = bodyCopy;\n      }\n\n      const handleTransformRequest = (res) => {\n        if (\n          this.transformRequest\n          && typeof this.transformRequest === 'function'\n        ) {\n          const tarnsformRequestPromise = this.transformRequest(res);\n          return tarnsformRequestPromise instanceof Promise\n            ? tarnsformRequestPromise\n            : Promise.resolve(tarnsformRequestPromise);\n        }\n        return Promise.resolve(res);\n      };\n\n      let responseHeaders = {};\n\n      let paramsString = '';\n      if (params) {\n        paramsString = `?${querystring.stringify(params)}`;\n      }\n      const finalURL = `${this.protocol}://${this.url}/${app}/${path}${paramsString}`;\n      return handleTransformRequest(\n        Object.assign(\n          {},\n          {\n            url: finalURL,\n          },\n          requestOptions,\n        ),\n      )\n        .then((ts) => {\n          const transformedRequest = Object.assign({}, ts);\n          const { url } = transformedRequest;\n          delete transformedRequest.url;\n          return fetch(url || finalURL, transformedRequest)\n            .then((res) => {\n              if (res.status >= 500) {\n                return reject(res);\n              }\n              responseHeaders = res.headers;\n              return res.json().then((data) => {\n                if (res.status >= 400) {\n                  return reject(res);\n                }\n                if (data && data.error) {\n                  return reject(data);\n                }\n                // Handle error from RS API RESPONSE\n                if (\n                  isRSAPI\n                  && data\n                  && Object.prototype.toString.call(data) === '[object Object]'\n                ) {\n                  if (body && body.query && body.query instanceof Array) {\n                    let errorResponses = 0;\n                    const allResponses = body.query.filter(\n                      q => q.execute || q.execute === undefined,\n                    ).length;\n                    if (data) {\n                      Object.keys(data).forEach((key) => {\n                        if (\n                          data[key]\n                          && Object.prototype.hasOwnProperty.call(data[key], 'error')\n                        ) {\n                          errorResponses += 1;\n                        }\n                      });\n                    }\n                    // reject only when all responses has error\n                    if (errorResponses > 0 && allResponses === errorResponses) {\n                      return reject(data);\n                    }\n                  }\n                }\n\n                // Handle error from _msearch response\n                if (data && data.responses instanceof Array) {\n                  const allResponses = data.responses.length;\n                  const errorResponses = data.responses.filter(entry => Object.prototype.hasOwnProperty.call(entry, 'error')).length;\n                  // reject only when all responses has error\n                  if (allResponses === errorResponses) {\n                    return reject(data);\n                  }\n                }\n                const response = Object.assign({}, data, {\n                  _timestamp: timestamp,\n                  _headers: responseHeaders,\n                });\n                return resolve(response);\n              });\n            })\n            .catch(e => reject(e));\n        })\n        .catch(err => reject(err));\n    } catch (e) {\n      return reject(e);\n    }\n  });\n}\nexport default fetchRequest;\n","import querystring from 'querystring';\nimport {\n uuidv4, btoa, removeUndefined, waitForSocketConnection,\n} from '../../utils/index';\n\nconst WebSocket = typeof window !== 'undefined' ? window.WebSocket : require('ws');\n\n/**\n * To connect a web socket\n * @param {Object} args\n * @param {String} args.method\n * @param {String} args.path\n * @param {Object} args.params\n * @param {Object} args.body\n */\nfunction wsRequest(args, onData, onError, onClose) {\n  try {\n    const parsedArgs = removeUndefined(args);\n    const { method, path, params } = parsedArgs;\n    let bodyCopy = args.body;\n    if (!bodyCopy || typeof bodyCopy !== 'object') {\n      bodyCopy = {};\n    }\n    const init = () => {\n      this.ws = new WebSocket(`wss://${this.url}/${this.app}`);\n      this.id = uuidv4();\n\n      this.request = {\n        id: this.id,\n        path: `${this.app}/${path}?${querystring.stringify(params)}`,\n        method,\n        body: bodyCopy,\n      };\n      if (this.credentials) {\n        this.request.authorization = `Basic ${btoa(this.credentials)}`;\n      }\n      this.result = {};\n      this.closeHandler = () => {\n        this.wsClosed();\n      };\n      this.errorHandler = (err) => {\n        this.processError(...[err]);\n      };\n      this.messageHandler = (message) => {\n        const dataObj = JSON.parse(message.data);\n        if (dataObj.body && dataObj.body.status >= 400) {\n          this.processError(...[dataObj]);\n        } else {\n          this.processMessage(...[dataObj]);\n        }\n      };\n      this.send = (request) => {\n        waitForSocketConnection(this.ws, () => {\n          try {\n            this.ws.send(JSON.stringify(request));\n          } catch (e) {\n            console.warn(e);\n          }\n        });\n      };\n      this.ws.onmessage = this.messageHandler;\n      this.ws.onerror = this.errorHandler;\n      this.ws.onclose = this.closeHandler;\n      this.send(this.request);\n      this.result.stop = this.stop;\n      this.result.reconnect = this.reconnect;\n\n      return this.result;\n    };\n    this.wsClosed = () => {\n      if (onClose) {\n        onClose();\n      }\n    };\n    this.stop = () => {\n      this.ws.onmessage = undefined;\n      this.ws.onclose = undefined;\n      this.ws.onerror = undefined;\n      this.wsClosed();\n      const unsubRequest = JSON.parse(JSON.stringify(this.request));\n      unsubRequest.unsubscribe = true;\n\n      if (this.unsubscribed !== true) {\n        this.send(unsubRequest);\n      }\n\n      this.unsubscribed = true;\n    };\n    this.reconnect = () => {\n      this.stop();\n      return wsRequest(args, onData, onError, onClose);\n    };\n    this.processError = (err) => {\n      if (onError) {\n        onError(err);\n      } else {\n        console.warn(err);\n      }\n    };\n\n    this.processMessage = (origDataObj) => {\n      const dataObj = JSON.parse(JSON.stringify(origDataObj));\n      if (!dataObj.id && dataObj.message) {\n        if (onError) {\n          onError(dataObj);\n        }\n        return;\n      }\n\n      if (dataObj.id === this.id) {\n        if (dataObj.message) {\n          delete dataObj.id;\n          if (onError) {\n            onError(dataObj);\n          }\n          return;\n        }\n\n        if (dataObj.query_id) {\n          this.query_id = dataObj.query_id;\n        }\n\n        if (dataObj.channel) {\n          this.channel = dataObj.channel;\n        }\n\n        if (dataObj.body && dataObj.body !== '') {\n          if (onData) {\n            onData(dataObj.body);\n          }\n        }\n\n        return;\n      }\n\n      if (!dataObj.id && dataObj.channel && dataObj.channel === this.channel) {\n        if (onData) {\n          onData(dataObj.event);\n        }\n      }\n    };\n    return init();\n  } catch (e) {\n    if (onError) {\n      onError(e);\n    } else {\n      console.warn(e);\n    }\n    return null;\n  }\n}\nexport default wsRequest;\n","import { removeUndefined, validate } from '../../utils/index';\n\n/**\n * Index Service\n * @param {Object} args\n * @param {String} args.type\n * @param {Object} args.body\n * @param {String} args.id\n */\nfunction indexApi(args) {\n  const parsedArgs = removeUndefined(args);\n  // Validate arguments\n  const valid = validate(parsedArgs, {\n    type: 'string',\n    body: 'object',\n  });\n  if (valid !== true) {\n    throw valid;\n  }\n  const { type, id, body } = parsedArgs;\n\n  delete parsedArgs.type;\n  delete parsedArgs.body;\n  delete parsedArgs.id;\n\n  let path;\n  if (id) {\n    path = `${type}/${encodeURIComponent(id)}`;\n  } else {\n    path = type;\n  }\n  return this.performFetchRequest({\n    method: 'POST',\n    path,\n    params: parsedArgs,\n    body,\n  });\n}\nexport default indexApi;\n","import { removeUndefined, validate } from '../../utils/index';\n\n/**\n * Get Service\n * @param {Object} args\n * @param {String} args.type\n * @param {String} args.id\n */\nfunction getApi(args) {\n  const parsedArgs = removeUndefined(args);\n  // Validate arguments\n  const valid = validate(parsedArgs, {\n    type: 'string',\n    id: 'string',\n  });\n\n  if (valid !== true) {\n    throw valid;\n  }\n\n  const { type, id } = parsedArgs;\n\n  delete parsedArgs.type;\n  delete parsedArgs.id;\n\n  const path = `${type}/${encodeURIComponent(id)}`;\n\n  return this.performFetchRequest({\n    method: 'GET',\n    path,\n    params: parsedArgs,\n  });\n}\nexport default getApi;\n","import { removeUndefined, validate } from '../../utils/index';\n\n/**\n * Update Service\n * @param {Object} args\n * @param {String} args.type\n * @param {Object} args.body\n * @param {String} args.id\n */\nfunction updateApi(args) {\n  const parsedArgs = removeUndefined(args);\n  // Validate arguments\n  const valid = validate(parsedArgs, {\n    type: 'string',\n    id: 'string',\n    body: 'object',\n  });\n  if (valid !== true) {\n    throw valid;\n  }\n\n  const { type, id, body } = parsedArgs;\n  delete parsedArgs.type;\n  delete parsedArgs.id;\n  delete parsedArgs.body;\n  const path = `${type}/${encodeURIComponent(id)}/_update`;\n\n  return this.performFetchRequest({\n    method: 'POST',\n    path,\n    params: parsedArgs,\n    body,\n  });\n}\nexport default updateApi;\n","import { removeUndefined, validate } from '../../utils/index';\n\n/**\n * Delete Service\n * @param {Object} args\n * @param {String} args.type\n * @param {String} args.id\n */\nfunction deleteApi(args) {\n  const parsedArgs = removeUndefined(args);\n  // Validate arguments\n  const valid = validate(parsedArgs, {\n    type: 'string',\n    id: 'string',\n  });\n  if (valid !== true) {\n    throw valid;\n  }\n\n  const { type, id } = parsedArgs;\n  delete parsedArgs.type;\n  delete parsedArgs.id;\n\n  const path = `${type}/${encodeURIComponent(id)}`;\n\n  return this.performFetchRequest({\n    method: 'DELETE',\n    path,\n    params: parsedArgs,\n  });\n}\nexport default deleteApi;\n","import { removeUndefined, validate } from '../../utils/index';\n\n/**\n * Bulk Service\n * @param {Object} args\n * @param {String} args.type\n * @param {Object} args.body\n */\nfunction bulkApi(args) {\n  const parsedArgs = removeUndefined(args);\n  // Validate arguments\n  const valid = validate(parsedArgs, {\n    body: 'object',\n  });\n  if (valid !== true) {\n    throw valid;\n  }\n\n  const { type, body } = parsedArgs;\n\n  delete parsedArgs.type;\n  delete parsedArgs.body;\n\n  let path;\n  if (type) {\n    path = `${type}/_bulk`;\n  } else {\n    path = '/_bulk';\n  }\n\n  return this.performFetchRequest({\n    method: 'POST',\n    path,\n    params: parsedArgs,\n    body,\n  });\n}\nexport default bulkApi;\n","import { removeUndefined, validate } from '../../utils/index';\n\n/**\n * Search Service\n * @param {Object} args\n * @param {String} args.type\n * @param {Object} args.body\n */\nfunction searchApi(args) {\n  const parsedArgs = removeUndefined(args);\n  // Validate arguments\n  const valid = validate(parsedArgs, {\n    body: 'object',\n  });\n  if (valid !== true) {\n    throw valid;\n  }\n\n  let type;\n  if (Array.isArray(parsedArgs.type)) {\n    type = parsedArgs.type.join();\n  } else {\n    // eslint-disable-next-line\n    type = parsedArgs.type;\n  }\n\n  const { body } = parsedArgs;\n\n  delete parsedArgs.type;\n  delete parsedArgs.body;\n\n  let path;\n  if (type) {\n    path = `${type}/_search`;\n  } else {\n    path = '_search';\n  }\n\n  return this.performFetchRequest({\n    method: 'POST',\n    path,\n    params: parsedArgs,\n    body,\n  });\n}\nexport default searchApi;\n","import { removeUndefined, validate } from '../../utils/index';\n\n/**\n * Msearch Service\n * @param {Object} args\n * @param {String} args.type\n * @param {Object} args.body\n */\nfunction msearchApi(args) {\n  const parsedArgs = removeUndefined(args);\n  // Validate arguments\n  const valid = validate(parsedArgs, {\n    body: 'object',\n  });\n  if (valid !== true) {\n    throw valid;\n  }\n\n  let type;\n  if (Array.isArray(parsedArgs.type)) {\n    type = parsedArgs.type.join();\n  } else {\n    ({ type } = parsedArgs);\n  }\n\n  const { body } = parsedArgs;\n\n  delete parsedArgs.type;\n  delete parsedArgs.body;\n\n  let path;\n  if (type) {\n    path = `${type}/_msearch`;\n  } else {\n    path = '_msearch';\n  }\n\n  return this.performFetchRequest({\n    method: 'POST',\n    path,\n    params: parsedArgs,\n    body,\n  });\n}\nexport default msearchApi;\n","import { removeUndefined, validateRSQuery } from '../../utils/index';\n\n/**\n * ReactiveSearch API Service for v3\n * @param {Array<Object>} query\n * @param {Object} settings\n * @param {boolean} settings.recordAnalytics\n * @param {boolean} settings.userId\n * @param {boolean} settings.enableQueryRules\n * @param {boolean} settings.customEvents\n */\nfunction reactiveSearchv3Api(query, settings) {\n    const parsedSettings = removeUndefined(settings);\n\n  // Validate query\n  const valid = validateRSQuery(query);\n\n  if (valid !== true) {\n    throw valid;\n  }\n\n  const body = {\n    settings: parsedSettings,\n    query,\n  };\n\n  return this.performFetchRequest({\n    method: 'POST',\n    path: '_reactivesearch.v3',\n    body,\n    isRSAPI: true,\n  });\n}\nexport default reactiveSearchv3Api;\n","import { removeUndefined, validate } from '../../utils/index';\n\n/**\n * Stream Service\n * @param {Object} args\n * @param {String} args.type\n * @param {Boolean} args.stream\n * @param {String} args.id\n * @param {Function} onData\n * @param {Function} onError\n * @param {Function} onClose\n */\nfunction getStream(args, ...rest) {\n  const parsedArgs = removeUndefined(args);\n  // Validate arguments\n  const valid = validate(parsedArgs, {\n    type: 'string',\n    id: 'string',\n  });\n  if (valid !== true) {\n    throw valid;\n  }\n\n  const { type, id } = parsedArgs;\n\n  delete parsedArgs.type;\n  delete parsedArgs.id;\n  delete parsedArgs.stream;\n\n  if (parsedArgs.stream === true) {\n    parsedArgs.stream = 'true';\n  } else {\n    delete parsedArgs.stream;\n    parsedArgs.streamonly = 'true';\n  }\n\n  return this.performWsRequest(\n    {\n      method: 'GET',\n      path: `${type}/${encodeURIComponent(id)}`,\n      params: parsedArgs,\n    },\n    ...rest,\n  );\n}\nexport default getStream;\n","import { removeUndefined, validate } from '../../utils/index';\n\n/**\n * Search Stream\n * @param {Object} args\n * @param {String} args.type\n * @param {Object} args.body\n * @param {Boolean} args.stream\n * @param {Function} onData\n * @param {Function} onError\n * @param {Function} onClose\n */\nfunction searchStreamApi(args, ...rest) {\n  const parsedArgs = removeUndefined(args);\n  // Validate arguments\n  const valid = validate(parsedArgs, {\n    body: 'object',\n  });\n  if (valid !== true) {\n    throw valid;\n  }\n\n  if (\n    parsedArgs.type === undefined\n    || (Array.isArray(parsedArgs.type) && parsedArgs.type.length === 0)\n  ) {\n    throw new Error('Missing fields: type');\n  }\n\n  let type;\n  if (Array.isArray(parsedArgs.type)) {\n    type = parsedArgs.type.join();\n  } else {\n    ({ type } = parsedArgs);\n  }\n\n  const { body } = parsedArgs;\n  delete parsedArgs.type;\n  delete parsedArgs.body;\n  delete parsedArgs.stream;\n\n  parsedArgs.streamonly = 'true';\n\n  return this.performWsRequest(\n    {\n      method: 'POST',\n      path: `${type}/_search`,\n      params: parsedArgs,\n      body,\n    },\n    ...rest,\n  );\n}\nexport default searchStreamApi;\n","var at, // The index of the current character\n    ch, // The current character\n    escapee = {\n        '\"':  '\"',\n        '\\\\': '\\\\',\n        '/':  '/',\n        b:    '\\b',\n        f:    '\\f',\n        n:    '\\n',\n        r:    '\\r',\n        t:    '\\t'\n    },\n    text,\n\n    error = function (m) {\n        // Call error when something is wrong.\n        throw {\n            name:    'SyntaxError',\n            message: m,\n            at:      at,\n            text:    text\n        };\n    },\n    \n    next = function (c) {\n        // If a c parameter is provided, verify that it matches the current character.\n        if (c && c !== ch) {\n            error(\"Expected '\" + c + \"' instead of '\" + ch + \"'\");\n        }\n        \n        // Get the next character. When there are no more characters,\n        // return the empty string.\n        \n        ch = text.charAt(at);\n        at += 1;\n        return ch;\n    },\n    \n    number = function () {\n        // Parse a number value.\n        var number,\n            string = '';\n        \n        if (ch === '-') {\n            string = '-';\n            next('-');\n        }\n        while (ch >= '0' && ch <= '9') {\n            string += ch;\n            next();\n        }\n        if (ch === '.') {\n            string += '.';\n            while (next() && ch >= '0' && ch <= '9') {\n                string += ch;\n            }\n        }\n        if (ch === 'e' || ch === 'E') {\n            string += ch;\n            next();\n            if (ch === '-' || ch === '+') {\n                string += ch;\n                next();\n            }\n            while (ch >= '0' && ch <= '9') {\n                string += ch;\n                next();\n            }\n        }\n        number = +string;\n        if (!isFinite(number)) {\n            error(\"Bad number\");\n        } else {\n            return number;\n        }\n    },\n    \n    string = function () {\n        // Parse a string value.\n        var hex,\n            i,\n            string = '',\n            uffff;\n        \n        // When parsing for string values, we must look for \" and \\ characters.\n        if (ch === '\"') {\n            while (next()) {\n                if (ch === '\"') {\n                    next();\n                    return string;\n                } else if (ch === '\\\\') {\n                    next();\n                    if (ch === 'u') {\n                        uffff = 0;\n                        for (i = 0; i < 4; i += 1) {\n                            hex = parseInt(next(), 16);\n                            if (!isFinite(hex)) {\n                                break;\n                            }\n                            uffff = uffff * 16 + hex;\n                        }\n                        string += String.fromCharCode(uffff);\n                    } else if (typeof escapee[ch] === 'string') {\n                        string += escapee[ch];\n                    } else {\n                        break;\n                    }\n                } else {\n                    string += ch;\n                }\n            }\n        }\n        error(\"Bad string\");\n    },\n\n    white = function () {\n\n// Skip whitespace.\n\n        while (ch && ch <= ' ') {\n            next();\n        }\n    },\n\n    word = function () {\n\n// true, false, or null.\n\n        switch (ch) {\n        case 't':\n            next('t');\n            next('r');\n            next('u');\n            next('e');\n            return true;\n        case 'f':\n            next('f');\n            next('a');\n            next('l');\n            next('s');\n            next('e');\n            return false;\n        case 'n':\n            next('n');\n            next('u');\n            next('l');\n            next('l');\n            return null;\n        }\n        error(\"Unexpected '\" + ch + \"'\");\n    },\n\n    value,  // Place holder for the value function.\n\n    array = function () {\n\n// Parse an array value.\n\n        var array = [];\n\n        if (ch === '[') {\n            next('[');\n            white();\n            if (ch === ']') {\n                next(']');\n                return array;   // empty array\n            }\n            while (ch) {\n                array.push(value());\n                white();\n                if (ch === ']') {\n                    next(']');\n                    return array;\n                }\n                next(',');\n                white();\n            }\n        }\n        error(\"Bad array\");\n    },\n\n    object = function () {\n\n// Parse an object value.\n\n        var key,\n            object = {};\n\n        if (ch === '{') {\n            next('{');\n            white();\n            if (ch === '}') {\n                next('}');\n                return object;   // empty object\n            }\n            while (ch) {\n                key = string();\n                white();\n                next(':');\n                if (Object.hasOwnProperty.call(object, key)) {\n                    error('Duplicate key \"' + key + '\"');\n                }\n                object[key] = value();\n                white();\n                if (ch === '}') {\n                    next('}');\n                    return object;\n                }\n                next(',');\n                white();\n            }\n        }\n        error(\"Bad object\");\n    };\n\nvalue = function () {\n\n// Parse a JSON value. It could be an object, an array, a string, a number,\n// or a word.\n\n    white();\n    switch (ch) {\n    case '{':\n        return object();\n    case '[':\n        return array();\n    case '\"':\n        return string();\n    case '-':\n        return number();\n    default:\n        return ch >= '0' && ch <= '9' ? number() : word();\n    }\n};\n\n// Return the json_parse function. It will have access to all of the above\n// functions and variables.\n\nmodule.exports = function (source, reviver) {\n    var result;\n    \n    text = source;\n    at = 0;\n    ch = ' ';\n    result = value();\n    white();\n    if (ch) {\n        error(\"Syntax error\");\n    }\n\n    // If there is a reviver function, we recursively walk the new structure,\n    // passing each name/value pair to the reviver function for possible\n    // transformation, starting with a temporary root object that holds the result\n    // in an empty key. If there is not a reviver function, we simply return the\n    // result.\n\n    return typeof reviver === 'function' ? (function walk(holder, key) {\n        var k, v, value = holder[key];\n        if (value && typeof value === 'object') {\n            for (k in value) {\n                if (Object.prototype.hasOwnProperty.call(value, k)) {\n                    v = walk(value, k);\n                    if (v !== undefined) {\n                        value[k] = v;\n                    } else {\n                        delete value[k];\n                    }\n                }\n            }\n        }\n        return reviver.call(holder, key, value);\n    }({'': result}, '')) : result;\n};\n","var cx = /[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,\n    escapable = /[\\\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,\n    gap,\n    indent,\n    meta = {    // table of character substitutions\n        '\\b': '\\\\b',\n        '\\t': '\\\\t',\n        '\\n': '\\\\n',\n        '\\f': '\\\\f',\n        '\\r': '\\\\r',\n        '\"' : '\\\\\"',\n        '\\\\': '\\\\\\\\'\n    },\n    rep;\n\nfunction quote(string) {\n    // If the string contains no control characters, no quote characters, and no\n    // backslash characters, then we can safely slap some quotes around it.\n    // Otherwise we must also replace the offending characters with safe escape\n    // sequences.\n    \n    escapable.lastIndex = 0;\n    return escapable.test(string) ? '\"' + string.replace(escapable, function (a) {\n        var c = meta[a];\n        return typeof c === 'string' ? c :\n            '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n    }) + '\"' : '\"' + string + '\"';\n}\n\nfunction str(key, holder) {\n    // Produce a string from holder[key].\n    var i,          // The loop counter.\n        k,          // The member key.\n        v,          // The member value.\n        length,\n        mind = gap,\n        partial,\n        value = holder[key];\n    \n    // If the value has a toJSON method, call it to obtain a replacement value.\n    if (value && typeof value === 'object' &&\n            typeof value.toJSON === 'function') {\n        value = value.toJSON(key);\n    }\n    \n    // If we were called with a replacer function, then call the replacer to\n    // obtain a replacement value.\n    if (typeof rep === 'function') {\n        value = rep.call(holder, key, value);\n    }\n    \n    // What happens next depends on the value's type.\n    switch (typeof value) {\n        case 'string':\n            return quote(value);\n        \n        case 'number':\n            // JSON numbers must be finite. Encode non-finite numbers as null.\n            return isFinite(value) ? String(value) : 'null';\n        \n        case 'boolean':\n        case 'null':\n            // If the value is a boolean or null, convert it to a string. Note:\n            // typeof null does not produce 'null'. The case is included here in\n            // the remote chance that this gets fixed someday.\n            return String(value);\n            \n        case 'object':\n            if (!value) return 'null';\n            gap += indent;\n            partial = [];\n            \n            // Array.isArray\n            if (Object.prototype.toString.apply(value) === '[object Array]') {\n                length = value.length;\n                for (i = 0; i < length; i += 1) {\n                    partial[i] = str(i, value) || 'null';\n                }\n                \n                // Join all of the elements together, separated with commas, and\n                // wrap them in brackets.\n                v = partial.length === 0 ? '[]' : gap ?\n                    '[\\n' + gap + partial.join(',\\n' + gap) + '\\n' + mind + ']' :\n                    '[' + partial.join(',') + ']';\n                gap = mind;\n                return v;\n            }\n            \n            // If the replacer is an array, use it to select the members to be\n            // stringified.\n            if (rep && typeof rep === 'object') {\n                length = rep.length;\n                for (i = 0; i < length; i += 1) {\n                    k = rep[i];\n                    if (typeof k === 'string') {\n                        v = str(k, value);\n                        if (v) {\n                            partial.push(quote(k) + (gap ? ': ' : ':') + v);\n                        }\n                    }\n                }\n            }\n            else {\n                // Otherwise, iterate through all of the keys in the object.\n                for (k in value) {\n                    if (Object.prototype.hasOwnProperty.call(value, k)) {\n                        v = str(k, value);\n                        if (v) {\n                            partial.push(quote(k) + (gap ? ': ' : ':') + v);\n                        }\n                    }\n                }\n            }\n            \n        // Join all of the member texts together, separated with commas,\n        // and wrap them in braces.\n\n        v = partial.length === 0 ? '{}' : gap ?\n            '{\\n' + gap + partial.join(',\\n' + gap) + '\\n' + mind + '}' :\n            '{' + partial.join(',') + '}';\n        gap = mind;\n        return v;\n    }\n}\n\nmodule.exports = function (value, replacer, space) {\n    var i;\n    gap = '';\n    indent = '';\n    \n    // If the space parameter is a number, make an indent string containing that\n    // many spaces.\n    if (typeof space === 'number') {\n        for (i = 0; i < space; i += 1) {\n            indent += ' ';\n        }\n    }\n    // If the space parameter is a string, it will be used as the indent string.\n    else if (typeof space === 'string') {\n        indent = space;\n    }\n\n    // If there is a replacer, it must be a function or an array.\n    // Otherwise, throw an error.\n    rep = replacer;\n    if (replacer && typeof replacer !== 'function'\n    && (typeof replacer !== 'object' || typeof replacer.length !== 'number')) {\n        throw new Error('JSON.stringify');\n    }\n    \n    // Make a fake root object containing our value under the key of ''.\n    // Return the result of stringifying the value.\n    return str('', {'': value});\n};\n","exports.parse = require('./lib/parse');\nexports.stringify = require('./lib/stringify');\n","var json = typeof JSON !== 'undefined' ? JSON : require('jsonify');\n\nmodule.exports = function (obj, opts) {\n    if (!opts) opts = {};\n    if (typeof opts === 'function') opts = { cmp: opts };\n    var space = opts.space || '';\n    if (typeof space === 'number') space = Array(space+1).join(' ');\n    var cycles = (typeof opts.cycles === 'boolean') ? opts.cycles : false;\n    var replacer = opts.replacer || function(key, value) { return value; };\n\n    var cmp = opts.cmp && (function (f) {\n        return function (node) {\n            return function (a, b) {\n                var aobj = { key: a, value: node[a] };\n                var bobj = { key: b, value: node[b] };\n                return f(aobj, bobj);\n            };\n        };\n    })(opts.cmp);\n\n    var seen = [];\n    return (function stringify (parent, key, node, level) {\n        var indent = space ? ('\\n' + new Array(level + 1).join(space)) : '';\n        var colonSeparator = space ? ': ' : ':';\n\n        if (node && node.toJSON && typeof node.toJSON === 'function') {\n            node = node.toJSON();\n        }\n\n        node = replacer.call(parent, key, node);\n\n        if (node === undefined) {\n            return;\n        }\n        if (typeof node !== 'object' || node === null) {\n            return json.stringify(node);\n        }\n        if (isArray(node)) {\n            var out = [];\n            for (var i = 0; i < node.length; i++) {\n                var item = stringify(node, i, node[i], level+1) || json.stringify(null);\n                out.push(indent + space + item);\n            }\n            return '[' + out.join(',') + indent + ']';\n        }\n        else {\n            if (seen.indexOf(node) !== -1) {\n                if (cycles) return json.stringify('__cycle__');\n                throw new TypeError('Converting circular structure to JSON');\n            }\n            else seen.push(node);\n\n            var keys = objectKeys(node).sort(cmp && cmp(node));\n            var out = [];\n            for (var i = 0; i < keys.length; i++) {\n                var key = keys[i];\n                var value = stringify(node, key, node[key], level+1);\n\n                if(!value) continue;\n\n                var keyValue = json.stringify(key)\n                    + colonSeparator\n                    + value;\n                ;\n                out.push(indent + space + keyValue);\n            }\n            seen.splice(seen.indexOf(node), 1);\n            return '{' + out.join(',') + indent + '}';\n        }\n    })({ '': obj }, '', obj, 0);\n};\n\nvar isArray = Array.isArray || function (x) {\n    return {}.toString.call(x) === '[object Array]';\n};\n\nvar objectKeys = Object.keys || function (obj) {\n    var has = Object.prototype.hasOwnProperty || function () { return true };\n    var keys = [];\n    for (var key in obj) {\n        if (has.call(obj, key)) keys.push(key);\n    }\n    return keys;\n};\n","import stringify from 'json-stable-stringify';\nimport { removeUndefined, validate, btoa } from '../../utils/index';\n\n/**\n * Webhook Service\n * @param {Object} args\n * @param {String} args.type\n * @param {Object} args.body\n * @param {Object} webhook\n * @param {Function} onData\n * @param {Function} onError\n * @param {Function} onClose\n */\nfunction searchStreamToURLApi(args, webhook, ...rest) {\n  const parsedArgs = removeUndefined(args);\n  let bodyCopy = parsedArgs.body;\n  let type;\n  let typeString;\n  // Validate arguments\n  let valid = validate(parsedArgs, {\n    body: 'object',\n  });\n  if (valid !== true) {\n    throw valid;\n  }\n\n  if (\n    parsedArgs.type === undefined\n    || !(typeof parsedArgs.type === 'string' || Array.isArray(parsedArgs.type))\n    || (parsedArgs.type === '' || parsedArgs.type.length === 0)\n  ) {\n    throw new Error('fields missing: type');\n  }\n\n  valid = validate(parsedArgs.body, {\n    query: 'object',\n  });\n  if (valid !== true) {\n    throw valid;\n  }\n\n  if (Array.isArray(parsedArgs.type)) {\n    ({ type } = parsedArgs);\n    typeString = parsedArgs.type.join();\n  } else {\n    type = [parsedArgs.type];\n    typeString = parsedArgs.type;\n  }\n\n  let webhooks = [];\n  const { query } = bodyCopy;\n\n  if (typeof webhook === 'string') {\n    const webHookObj = {};\n    webHookObj.url = webhook;\n    webHookObj.method = 'GET';\n    webhooks.push(webHookObj);\n  } else if (webhook.constructor === Array) {\n    webhooks = webhook;\n  } else if (webhook === Object(webhook)) {\n    webhooks.push(webhook);\n  } else {\n    throw new Error('fields missing: second argument(webhook) is necessary');\n  }\n\n  const populateBody = () => {\n    bodyCopy = {};\n    bodyCopy.webhooks = webhooks;\n    bodyCopy.query = query;\n    bodyCopy.type = type;\n  };\n\n  populateBody();\n\n  const encode64 = btoa(stringify(query));\n  const path = `.percolator/webhooks-0-${typeString}-0-${encode64}`;\n\n  this.change = () => {\n    webhooks = [];\n\n    if (typeof parsedArgs === 'string') {\n      const webhook2 = {};\n      webhook2.url = parsedArgs;\n      webhook2.method = 'POST';\n      webhooks.push(webhook2);\n    } else if (parsedArgs.constructor === Array) {\n      webhooks = parsedArgs;\n    } else if (parsedArgs === Object(parsedArgs)) {\n      webhooks.push(parsedArgs);\n    } else {\n      throw new Error('fields missing: one of webhook or url fields is required');\n    }\n\n    populateBody();\n\n    return this.performRequest('POST');\n  };\n  this.stop = () => {\n    bodyCopy = undefined;\n    return this.performRequest('DELETE');\n  };\n  this.performRequest = (method) => {\n    const res = this.performWsRequest(\n      {\n        method,\n        path,\n        body: bodyCopy,\n      },\n      ...rest,\n    );\n\n    res.change = this.change;\n    res.stop = this.stop;\n\n    return res;\n  };\n  return this.performRequest('POST');\n}\nexport default searchStreamToURLApi;\n","/**\n * To get types\n */\nfunction getTypesService() {\n  return new Promise((resolve, reject) => {\n    try {\n      return this.performFetchRequest({\n        method: 'GET',\n        path: '_mapping',\n      }).then((data) => {\n        const types = Object.keys(data[this.app].mappings).filter(type => type !== '_default_');\n        return resolve(types);\n      });\n    } catch (e) {\n      return reject(e);\n    }\n  });\n}\nexport default getTypesService;\n","/**\n * To get mappings\n */\nfunction getMappings() {\n  return this.performFetchRequest({\n    method: 'GET',\n    path: '_mapping',\n  });\n}\nexport default getMappings;\n","import { removeUndefined, validateRSQuery } from '../../utils/index';\n\n/**\n * ReactiveSearch suggestions API for v3\n * @param {Array<Object>} query\n * @param {Object} settings\n * @param {boolean} settings.recordAnalytics\n * @param {boolean} settings.userId\n * @param {boolean} settings.enableQueryRules\n * @param {boolean} settings.customEvents\n */\nfunction getSuggestionsv3Api(query, settings) {\n  const parsedSettings = removeUndefined(settings);\n\n  // Validate query\n  const valid = validateRSQuery(query, true);\n\n  if (valid !== true) {\n    throw valid;\n  }\n\n  const body = {\n    settings: parsedSettings,\n    query,\n  };\n\n  return this.performFetchRequest({\n    method: 'POST',\n    path: '_reactivesearch.v3',\n    body,\n    isRSAPI: true,\n    isSuggestionsAPI: true,\n  });\n}\n\nexport default getSuggestionsv3Api;\n","import AppBaseClient from './core/index';\nimport fetchRequest from './core/request/fetch';\nimport wsRequest from './core/request/ws';\nimport indexApi from './core/api/index';\nimport getApi from './core/api/get';\nimport updateApi from './core/api/update';\nimport deleteApi from './core/api/delete';\nimport bulkApi from './core/api/bulk';\nimport searchApi from './core/api/search';\nimport msearchApi from './core/api/msearch';\nimport reactiveSearchv3Api from './core/api/reactiveSearchv3Api';\nimport getStreamApi from './core/api/getStream';\nimport searchStreamApi from './core/api/searchStream';\nimport searchStreamToURLApi from './core/api/searchStreamToURL';\nimport getTypesApi from './core/api/getTypes';\nimport getMappingsApi from './core/api/getMappings';\nimport { encodeHeaders } from './utils/index';\nimport getSuggestionsv3Api from './core/api/getSuggestionsv3Api';\n\nexport default function (config) {\n  const client = new AppBaseClient(config);\n\n  AppBaseClient.prototype.performFetchRequest = fetchRequest;\n\n  AppBaseClient.prototype.performWsRequest = wsRequest;\n\n  AppBaseClient.prototype.index = indexApi;\n\n  AppBaseClient.prototype.get = getApi;\n\n  AppBaseClient.prototype.update = updateApi;\n\n  AppBaseClient.prototype.delete = deleteApi;\n\n  AppBaseClient.prototype.bulk = bulkApi;\n\n  AppBaseClient.prototype.search = searchApi;\n\n  AppBaseClient.prototype.msearch = msearchApi;\n\n  AppBaseClient.prototype.reactiveSearchv3 = reactiveSearchv3Api;\n\n  AppBaseClient.prototype.getQuerySuggestions = getSuggestionsv3Api;\n\n  AppBaseClient.prototype.getStream = getStreamApi;\n\n  AppBaseClient.prototype.searchStream = searchStreamApi;\n\n  AppBaseClient.prototype.searchStreamToURL = searchStreamToURLApi;\n\n  AppBaseClient.prototype.getTypes = getTypesApi;\n\n  AppBaseClient.prototype.getMappings = getMappingsApi;\n\n  AppBaseClient.prototype.setHeaders = function (\n    headers = {},\n    shouldEncode = false,\n  ) {\n    // Encode headers\n    if (shouldEncode) {\n      this.headers = encodeHeaders(headers);\n    } else {\n      this.headers = headers;\n    }\n  };\n\n  if (typeof window !== 'undefined') {\n    window.Appbase = client;\n  }\n  return client;\n}\n"],"names":["contains","string","substring","indexOf","isAppbase","url","btoa","input","chars","str","output","block","charCode","i","map","charAt","charCodeAt","Error","uuidv4","replace","c","r","Math","random","v","toString","validateRSQuery","query","isSuggestionsAPI","Object","prototype","call","length","q","id","type","dataField","validate","object","fields","invalid","emptyFor","keys","forEach","key","babelHelpers.typeof","push","missing","removeUndefined","value","constructor","JSON","parse","stringify","waitForSocketConnection","socket","callback","setTimeout","readyState","encodeHeaders","headers","shouldEncode","encodedHeaders","header","encodeURI","AppBase","config","URL","auth","host","path","protocol","app","slice","credentials","username","password","require$$0","require$$1","this","fetchRequest","args","Promise","resolve","reject","parsedArgs","method","params","body","isRSAPI","bodyCopy","contentType","endsWith","assign","Accept","timestamp","Date","now","Authorization","requestOptions","Array","isArray","arrayBody","item","handleTransformRequest","res","transformRequest","tarnsformRequestPromise","responseHeaders","paramsString","querystring","finalURL","then","ts","transformedRequest","fetch","status","json","data","error","errorResponses","allResponses","filter","execute","undefined","hasOwnProperty","responses","entry","response","_timestamp","_headers","catch","e","err","WebSocket","window","require","wsRequest","onData","onError","onClose","init","ws","request","authorization","result","closeHandler","wsClosed","errorHandler","processError","messageHandler","message","dataObj","processMessage","send","console","warn","onmessage","onerror","onclose","stop","reconnect","unsubRequest","unsubscribe","unsubscribed","origDataObj","query_id","channel","event","indexApi","valid","encodeURIComponent","performFetchRequest","getApi","updateApi","deleteApi","bulkApi","searchApi","join","msearchApi","reactiveSearchv3Api","settings","parsedSettings","getStream","stream","streamonly","rest","performWsRequest","searchStreamApi","searchStreamToURLApi","webhook","typeString","webhooks","webHookObj","populateBody","encode64","change","webhook2","performRequest","getTypesService","types","mappings","getMappings","getSuggestionsv3Api","client","AppBaseClient","index","get","update","delete","bulk","search","msearch","reactiveSearchv3","getQuerySuggestions","getStreamApi","searchStream","searchStreamToURL","getTypes","getTypesApi","getMappingsApi","setHeaders","Appbase"],"mappings":"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"}